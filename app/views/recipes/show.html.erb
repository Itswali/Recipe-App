<section class="recipe-main">
  <h1 class="detail-title"><%= @recipe.name %></h1>



  <div class="details-container">
    <div class="recipe-left">
      <ul>
        <li>Preparation time <%= @recipe.preparation_time %> hours</li>
        <li>Cooking time <%= @recipe.cooking_time%> hours</li>
        <li><%= @recipe.description%></li>
      </ul>
    </div>

    <div class="recipe-right">
      <% if (@recipe.user == current_user) %>
        <div><%=@recipe.public? ? 'Public' : 'Private'%></div>
        <%= button_to @recipe.public? ? 'Make private' : 'Make public', toggle_recipe_path(id: @recipe.id), method: :post, class: 'toggle_btn', remote: true, class: "btn-primary" %>
      <% end %>
    </div>
  </div>
</section>


<div class="detail-links">
  <%= link_to "Generate shopping list", shopping_list_path, class: "button-link"%>
  <div class="gap"></div>
  <%= link_to 'Add ingredient', new_recipe_recipe_food_path(@recipe.id), class: "button-link" %>
</div>

  <% if @recipe.public? || (@recipe.user == current_user) %>
      <table>
        <thead>
          <tr>
            <th >Food</th>
            <th >Quantity</th>
            <th >Value</th>
            <th >Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @recipe_foods.each do |recipe_food| %>
              <td><%= recipe_food.food.name %></td>
          <td><%= recipe_food.food.quantity %><%= recipe_food.food.measurement_unit %></td>
          <td>$<%= recipe_food.food.price * recipe_food.food.quantity %></td>


              <td class="modify-remove">
                <%= link_to "Modify", edit_recipe_recipe_food_path(@recipe, recipe_food), class: "btn btn-primary" %>
                <%= button_to "Remove", recipe_recipe_food_path(@recipe, recipe_food), method: :delete, data: { confirm: "Are you sure you want to delete this recipe food?" }, class: "btn btn-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
  <% end %>
  <div class="back-link-container">
    <%= link_to 'Back', session.delete(:return_to) || root_path, class: "back-link" %>
  </div>
</div>
